<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get started with epiprocess • epiprocess</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Serif_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get started with epiprocess">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiprocess</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.11.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/epiprocess.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/epi_df.html">Working with epi_df objects and time series data</a></li>
    <li><a class="dropdown-item" href="../articles/epi_archive.html">Working with epi_archive objects and data revisions</a></li>
    <li><a class="dropdown-item" href="../articles/outliers.html">Detect and correct outliers in signals</a></li>
    <li><a class="dropdown-item" href="../articles/growth_rate.html">Estimate growth rates in signals</a></li>
    <li><a class="dropdown-item" href="../articles/correlation.html">Correlate signals across locations and time</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmu-delphi/epiprocess/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get started with epiprocess</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cmu-delphi/epiprocess/vignettes/epiprocess.Rmd" class="external-link"><code>vignettes/epiprocess.Rmd</code></a></small>
      <div class="d-none name"><code>epiprocess.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette provides a brief introduction to the
<a href="https://cmu-delphi.github.io/epiprocess/">epiprocess</a> package. We will do the following:</p>
<ul>
<li>Get data into <code><a href="../reference/epi_df.html">epi_df()</a></code> format and plot the data</li>
<li>Perform basic signal processing tasks (lagged differences, rolling
average, cumulative sum, etc.)</li>
<li>Detect outliers in the data and apply corrections</li>
<li>Calculate the growth rate of the data</li>
<li>Get data into <code><a href="../reference/epi_archive.html">epi_archive()</a></code> format and perform similar
signal processing tasks</li>
</ul>
</div>
<div class="section level2">
<h2 id="getting-data-into-epi_df-format">Getting data into <code>epi_df</code> format<a class="anchor" aria-label="anchor" href="#getting-data-into-epi_df-format"></a>
</h2>
<p>We’ll start by getting data into <code><a href="../reference/epi_df.html">epi_df()</a></code> format, which
is just a tibble with a bit of special structure. As an example, we will
get COVID-19 confirmed cumulative case data from JHU CSSE for
California, Florida, New York, and Texas, from March 1, 2020 to January
31, 2022. We have included this example data in the
<code><a href="https://cmu-delphi.github.io/epidatasets/reference/covid_confirmed_cumulative_num.html" class="external-link">epidatasets::covid_confirmed_cumulative_num</a></code> object, which
we prepared by downloading the data using
<code><a href="https://cmu-delphi.github.io/epidatr/reference/pub_covidcast.html" class="external-link">epidatr::pub_covidcast()</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmu-delphi.github.io/epidatr/" class="external-link">epidatr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmu-delphi.github.io/epiprocess/">epiprocess</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://withr.r-lib.org" class="external-link">withr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_confirmed_cumulative_num</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">covid_confirmed_cumulative_num</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">covid_confirmed_cumulative_num</span><span class="op">)</span></span></code></pre></div>
<p>The same data can be downloaded with <a href="https://cmu-delphi.github.io/epidatr/" class="external-link">epidatr</a> as
follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_confirmed_cumulative_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/pub_covidcast.html" class="external-link">pub_covidcast</a></span><span class="op">(</span></span>
<span>  source <span class="op">=</span> <span class="st">"jhu-csse"</span>,</span>
<span>  signals <span class="op">=</span> <span class="st">"confirmed_cumulative_num"</span>,</span>
<span>  geo_type <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>  time_type <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  geo_values <span class="op">=</span> <span class="st">"ca,fl,ny,tx"</span>,</span>
<span>  time_values <span class="op">=</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/epirange.html" class="external-link">epirange</a></span><span class="op">(</span><span class="fl">20200301</span>, <span class="fl">20220131</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span></code></pre></div>
<p>The tibble returned has the columns required for an
<code>epi_df</code> object, <code>geo_value</code> and
<code>time_value</code>, so we can convert it directly to an
<code>epi_df</code> object using <code><a href="../reference/epi_df.html">as_epi_df()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op">&lt;-</span> <span class="va">covid_confirmed_cumulative_num</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, cases_cumulative <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_df.html">as_epi_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cases_daily <span class="op">=</span> <span class="va">cases_cumulative</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">cases_cumulative</span>, default <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">edf</span></span>
<span><span class="co">#&gt; An `epi_df` object, 2,808 x 4 with metadata:</span></span>
<span><span class="co">#&gt; * geo_type  = state</span></span>
<span><span class="co">#&gt; * time_type = day</span></span>
<span><span class="co">#&gt; * as_of     = 2025-03-07 00:42:12.806987</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,808 × 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   geo_value [4]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span> <span style="font-weight: bold;">time_value</span> <span style="font-weight: bold;">cases_cumulative</span> <span style="font-weight: bold;">cases_daily</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca        2020-03-01               19          19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fl        2020-03-01                0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ny        2020-03-01                0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> tx        2020-03-01                0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ca        2020-03-02               23           4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> fl        2020-03-02                1           1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,802 more rows</span></span></span></code></pre></div>
<p>In brief, we can think of an <code>epi_df</code> object as snapshot
of an epidemiological data set as it was at a particular point in time
(recorded in the <code>as_of</code> attribute). We can easily plot the
data using the <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot()</a></code> method (which is a convenience
wrapper to <code>ggplot2</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">cases_cumulative</span><span class="op">)</span></span></code></pre></div>
<p><img src="epiprocess_files/figure-html/unnamed-chunk-5-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>We can compute the 7 day moving average of the confirmed daily cases
for each <code>geo_value</code> by using the
<code><a href="../reference/epi_slide_opt.html">epi_slide_mean()</a></code> function. For a more in-depth guide to
sliding, see <code><a href="../articles/epi_df.html">vignette("epi_df")</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_slide_opt.html">epi_slide_mean</a></span><span class="op">(</span><span class="va">cases_daily</span>, .window_size <span class="op">=</span> <span class="fl">7</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; An `epi_df` object, 2,808 x 5 with metadata:</span></span>
<span><span class="co">#&gt; * geo_type  = state</span></span>
<span><span class="co">#&gt; * time_type = day</span></span>
<span><span class="co">#&gt; * as_of     = 2025-03-07 00:42:12.806987</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,808 × 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   geo_value [4]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span> <span style="font-weight: bold;">time_value</span> <span style="font-weight: bold;">cases_cumulative</span> <span style="font-weight: bold;">cases_daily</span> <span style="font-weight: bold;">cases_daily_7dav</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca        2020-03-01               19          19            19   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ca        2020-03-02               23           4            11.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ca        2020-03-03               29           6             9.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ca        2020-03-04               40          11            10   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ca        2020-03-05               50          10            10   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ca        2020-03-06               68          18            11.3 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,802 more rows</span></span></span></code></pre></div>
<p>We can compute the growth rate of the confirmed cumulative cases for
each <code>geo_value</code>. For a more in-depth guide to growth rates,
see <code><a href="../articles/growth_rate.html">vignette("growth_rate")</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cases_growth <span class="op">=</span> <span class="fu"><a href="../reference/growth_rate.html">growth_rate</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time_value</span>, y <span class="op">=</span> <span class="va">cases_cumulative</span>, method <span class="op">=</span> <span class="st">"rel_change"</span>, h <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; An `epi_df` object, 2,808 x 5 with metadata:</span></span>
<span><span class="co">#&gt; * geo_type  = state</span></span>
<span><span class="co">#&gt; * time_type = day</span></span>
<span><span class="co">#&gt; * as_of     = 2025-03-07 00:42:12.806987</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,808 × 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   geo_value [4]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span> <span style="font-weight: bold;">time_value</span> <span style="font-weight: bold;">cases_cumulative</span> <span style="font-weight: bold;">cases_daily</span> <span style="font-weight: bold;">cases_growth</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca        2020-03-01               19          19        0.534</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fl        2020-03-01                0           0      <span style="color: #BB0000;">Inf</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ny        2020-03-01                0           0      <span style="color: #BB0000;">Inf</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> tx        2020-03-01                0           0      <span style="color: #BB0000;">Inf</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ca        2020-03-02               23           4        0.579</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> fl        2020-03-02                1           1        2.32 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,802 more rows</span></span></span></code></pre></div>
<p>Detect outliers in daily reported cases for each
<code>geo_value</code>. For a more in-depth guide to outlier detection,
see <code><a href="../articles/outliers.html">vignette("outliers")</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>outlier_info <span class="op">=</span> <span class="fu"><a href="../reference/detect_outlr.html">detect_outlr</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time_value</span>, y <span class="op">=</span> <span class="va">cases_daily</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; An `epi_df` object, 2,808 x 5 with metadata:</span></span>
<span><span class="co">#&gt; * geo_type  = state</span></span>
<span><span class="co">#&gt; * time_type = day</span></span>
<span><span class="co">#&gt; * as_of     = 2025-03-07 00:42:12.806987</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,808 × 5</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span> <span style="font-weight: bold;">time_value</span> <span style="font-weight: bold;">cases_cumulative</span> <span style="font-weight: bold;">cases_daily</span> <span style="font-weight: bold;">outlier_info$rm_lower</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca        2020-03-01               19          19                  0.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fl        2020-03-01                0           0                 -<span style="color: #BB0000;">2.5</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ny        2020-03-01                0           0                 -<span style="color: #BB0000;">2.5</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> tx        2020-03-01                0           0                 -<span style="color: #BB0000;">2</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ca        2020-03-02               23           4                  0.25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> fl        2020-03-02                1           1                 -<span style="color: #BB0000;">1.75</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,802 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: </span><span style="color: #949494; font-weight: bold;">outlier_info$rm_upper</span><span style="color: #949494;"> &lt;dbl&gt;, </span><span style="color: #949494; font-weight: bold;">$rm_replacement</span><span style="color: #949494;"> &lt;dbl&gt;, …</span></span></span></code></pre></div>
<p>Add a column to the epi_df object with the daily deaths for each
<code>geo_value</code> and compute the correlations between cases and
deaths for each <code>geo_value</code>. For a more in-depth guide to
correlations, see <code><a href="../articles/correlation.html">vignette("correlation")</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/pub_covidcast.html" class="external-link">pub_covidcast</a></span><span class="op">(</span></span>
<span>  source <span class="op">=</span> <span class="st">"jhu-csse"</span>,</span>
<span>  signals <span class="op">=</span> <span class="st">"deaths_incidence_num"</span>,</span>
<span>  geo_type <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>  time_type <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  geo_values <span class="op">=</span> <span class="st">"ca,fl,ny,tx"</span>,</span>
<span>  time_values <span class="op">=</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/epirange.html" class="external-link">epirange</a></span><span class="op">(</span><span class="fl">20200301</span>, <span class="fl">20220131</span><span class="op">)</span>,</span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, deaths_daily <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_df.html">as_epi_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/arrange_canonical.html">arrange_canonical</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">edf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">edf</span>, <span class="va">df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geo_value"</span>, <span class="st">"time_value"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_slide_opt.html">epi_slide_mean</a></span><span class="op">(</span><span class="va">deaths_daily</span>, .window_size <span class="op">=</span> <span class="fl">7</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_cor.html">epi_cor</a></span><span class="op">(</span><span class="va">cases_daily</span>, <span class="va">deaths_daily</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span>   <span style="font-weight: bold;">cor</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca        0.202</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fl        0.245</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ny        0.183</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> tx        0.359</span></span></code></pre></div>
<p>Note that if an epi_df object loses its <code>geo_value</code> or
<code>time_value</code> columns, it will decay to a regular tibble.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">time_value</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,808 × 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   geo_value [4]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">geo_value</span> <span style="font-weight: bold;">cases_cumulative</span> <span style="font-weight: bold;">cases_daily</span> <span style="font-weight: bold;">deaths_daily</span></span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ca                      19          19            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fl                       0           0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ny                       0           0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> tx                       0           0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ca                      23           4            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> fl                       1           1            0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,802 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-data-into-epi_archive-format">Getting data into <code>epi_archive</code> format<a class="anchor" aria-label="anchor" href="#getting-data-into-epi_archive-format"></a>
</h2>
<p>We can also get data into <code><a href="../reference/epi_archive.html">epi_archive()</a></code> format, which
can be thought of as an aggregation of many <code>epi_df</code>
snapshots. We can perform similar signal processing tasks on
<code>epi_archive</code> objects as we did on <code>epi_df</code>
objects, though the interface is a bit different.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmu-delphi.github.io/epidatr/" class="external-link">epidatr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmu-delphi.github.io/epiprocess/">epiprocess</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/pub_covidcast.html" class="external-link">pub_covidcast</a></span><span class="op">(</span></span>
<span>  source <span class="op">=</span> <span class="st">"doctor-visits"</span>,</span>
<span>  signals <span class="op">=</span> <span class="st">"smoothed_adj_cli"</span>,</span>
<span>  geo_type <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>  time_type <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  geo_values <span class="op">=</span> <span class="st">"ca,fl,ny,tx"</span>,</span>
<span>  time_values <span class="op">=</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/epirange.html" class="external-link">epirange</a></span><span class="op">(</span><span class="fl">20200601</span>, <span class="fl">20211201</span><span class="op">)</span>,</span>
<span>  issues <span class="op">=</span> <span class="fu"><a href="https://cmu-delphi.github.io/epidatr/reference/epirange.html" class="external-link">epirange</a></span><span class="op">(</span><span class="fl">20200601</span>, <span class="fl">20211201</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, <span class="va">issue</span>, percent_cli <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/epi_archive.html">as_epi_archive</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dv</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; → An `epi_archive` object, with metadata:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Min/max time values: 2020-06-01 / 2021-11-26</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> First/last version with update: 2020-06-06 / 2021-11-29</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Versions end: 2021-11-29</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> A preview of the table (117124 rows x 4 columns):</span></span>
<span><span class="co">#&gt; Key: &lt;geo_value, time_value, version&gt;</span></span>
<span><span class="co">#&gt;         geo_value time_value    version percent_cli</span></span>
<span><span class="co">#&gt;            &lt;char&gt;     &lt;Date&gt;     &lt;Date&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt;      1:        ca 2020-06-01 2020-06-06    2.140116</span></span>
<span><span class="co">#&gt;      2:        ca 2020-06-01 2020-06-08    2.140379</span></span>
<span><span class="co">#&gt;      3:        ca 2020-06-01 2020-06-09    2.114430</span></span>
<span><span class="co">#&gt;      4:        ca 2020-06-01 2020-06-10    2.133677</span></span>
<span><span class="co">#&gt;      5:        ca 2020-06-01 2020-06-11    2.197207</span></span>
<span><span class="co">#&gt;     ---                                            </span></span>
<span><span class="co">#&gt; 117120:        tx 2021-11-23 2021-11-29    2.159704</span></span>
<span><span class="co">#&gt; 117121:        tx 2021-11-24 2021-11-27    2.024028</span></span>
<span><span class="co">#&gt; 117122:        tx 2021-11-24 2021-11-29    1.937911</span></span>
<span><span class="co">#&gt; 117123:        tx 2021-11-25 2021-11-29    1.866631</span></span>
<span><span class="co">#&gt; 117124:        tx 2021-11-26 2021-11-29    1.858596</span></span></code></pre>
<p>See <code><a href="../articles/epi_archive.html">vignette("epi_archive")</a></code> for a more in-depth guide to
<code>epi_archive</code> objects.</p>
</div>
<div class="section level2">
<h2 id="data-attribution">Data attribution<a class="anchor" aria-label="anchor" href="#data-attribution"></a>
</h2>
<p>This document contains a dataset that is a modified part of the <a href="https://github.com/CSSEGISandData/COVID-19" class="external-link">COVID-19 Data
Repository by the Center for Systems Science and Engineering (CSSE) at
Johns Hopkins University</a> as <a href="https://cmu-delphi.github.io/delphi-epidata/api/covidcast-signals/jhu-csse.html" class="external-link">republished
in the COVIDcast Epidata API</a>. This data set is licensed under the
terms of the <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">Creative Commons
Attribution 4.0 International license</a> by the Johns Hopkins
University on behalf of its Center for Systems Science in Engineering.
Copyright Johns Hopkins University 2020.</p>
<p><a href="https://cmu-delphi.github.io/delphi-epidata/api/covidcast-signals/jhu-csse.html" class="external-link">From
the COVIDcast Epidata API</a>: These signals are taken directly from the
JHU CSSE <a href="https://github.com/CSSEGISandData/COVID-19" class="external-link">COVID-19
GitHub repository</a> without changes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p><a href="https://delphi.cmu.edu/about/" class="external-link">About Delphi</a> • <a href="https://delphi.cmu.edu/epidemic-signals/terms-of-use/" class="external-link">Terms of Use</a> • <a href="https://docs.google.com/forms/u/1/d/e/1FAIpQLScqgT1fKZr5VWBfsaSp-DNaN03aV6EoZU4YljIzHJ1Wl_zmtg/viewform" class="external-link">Contact Us</a> • <a href="https://github.com/cmu-delphi/" class="external-link">Delphi GitHub</a> • <a href="https://cmu-delphi.github.io/delphi-epidata/" class="external-link">Epidata API</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>epiprocess</p>
</div>

    </footer>
</div>





  </body>
</html>
