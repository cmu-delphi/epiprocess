<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimized slide function for performing common rolling computations on an epi_df object — epi_slide_opt • epiprocess</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimized slide function for performing common rolling computations on an epi_df object — epi_slide_opt"><meta name="description" content="Slides an n-timestep data.table::froll or slider::summary-slide function
over variables in an epi_df object. See the
slide vignette
for examples."><meta property="og:description" content="Slides an n-timestep data.table::froll or slider::summary-slide function
over variables in an epi_df object. See the
slide vignette
for examples."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiprocess</a>

    <small class="nav-text text-success me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epiprocess.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/slide.html">Slide a computation over signal values</a></li>
    <li><a class="dropdown-item" href="../articles/growth_rate.html">Estimate growth rates in signals</a></li>
    <li><a class="dropdown-item" href="../articles/correlation.html">Correlate signals over space and time</a></li>
    <li><a class="dropdown-item" href="../articles/aggregation.html">Aggregate signals over space and time</a></li>
    <li><a class="dropdown-item" href="../articles/outliers.html">Detect and correct outliers in signals</a></li>
    <li><a class="dropdown-item" href="../articles/archive.html">Work with archive objects and data revisions</a></li>
    <li><a class="dropdown-item" href="../articles/advanced.html">Advanced sliding with nonstandard outputs</a></li>
    <li><a class="dropdown-item" href="../articles/compactify.html">Compactify to remove redundant archive data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmu-delphi/epiprocess/tree/main/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimized slide function for performing common rolling computations on an <code>epi_df</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/cmu-delphi/epiprocess/blob/main/R/slide.R" class="external-link"><code>R/slide.R</code></a></small>
      <div class="d-none name"><code>epi_slide_opt.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Slides an n-timestep <a href="https://rdatatable.gitlab.io/data.table/reference/froll.html" class="external-link">data.table::froll</a> or <a href="https://slider.r-lib.org/reference/summary-slide.html" class="external-link">slider::summary-slide</a> function
over variables in an <code>epi_df</code> object. See the
<a href="https://cmu-delphi.github.io/epiprocess/articles/slide.html">slide vignette</a>
for examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">epi_slide_opt</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">col_names</span>,</span>
<span>  <span class="va">f</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  before <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  after <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ref_time_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_col_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_list_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names_sep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  all_rows <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>The <code>epi_df</code> object under consideration, <a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">grouped</a>
or ungrouped. If ungrouped, all data in <code>x</code> will be treated as part of a
single data group.</p></dd>


<dt id="arg-col-names">col_names<a class="anchor" aria-label="anchor" href="#arg-col-names"></a></dt>
<dd><p>&lt;<code>tidy-select</code>&gt; An unquoted column
name(e.g., <code>cases</code>), multiple column names (e.g., <code>c(cases, deaths)</code>), or
<a href="https://tidyselect.r-lib.org/reference/language.html" class="external-link">other tidy-select expression</a>. Variable names can
be used as if they were positions in the data frame, so expressions like
<code>x:y</code> can be used to select a range of variables. If you have the desired
column names stored in a vector <code>vars</code>, use <code>col_names = all_of(vars)</code>.</p>
<p>The tidy-selection renaming interface is not supported, and cannot be used
to provide output column names; if you want to customize the output column
names, use <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename</a></code> after the slide.</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>Function; together with <code>...</code> specifies the computation to slide.
<code>f</code> must be one of <code>data.table</code>'s rolling functions
(<code>frollmean</code>, <code>frollsum</code>, <code>frollapply</code>. See <a href="https://rdatatable.gitlab.io/data.table/reference/froll.html" class="external-link">data.table::roll</a>) or one
of <code>slider</code>'s specialized sliding functions (<code>slide_mean</code>, <code>slide_sum</code>,
etc. See <a href="https://slider.r-lib.org/reference/summary-slide.html" class="external-link">slider::summary-slide</a>). To "slide" means to apply a
computation within a sliding (a.k.a. "rolling") time window for each data
group. The window is determined by the <code>before</code> and <code>after</code> parameters
described below. One time step is typically one day or one week; see
details for more explanation.</p>
<p>The optimized <code>data.table</code> and <code>slider</code> functions can't be directly passed
as the computation function in <code>epi_slide</code> without careful handling to
make sure each computation group is made up of the <code>n</code> dates rather than
<code>n</code> points. <code>epi_slide_opt</code> (and wrapper functions <code>epi_slide_mean</code> and
<code>epi_slide_sum</code>) take care of window completion automatically to prevent
associated errors.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to pass to the slide computation <code>f</code>, for
example, <code>na.rm</code> and <code>algo</code> if <code>f</code> is a <code>data.table</code> function. If <code>f</code> is
a <code>data.table</code> function, it is automatically passed the data <code>x</code> to
operate on, the window size <code>n</code>, and the alignment <code>align</code>. Providing
these args via <code>...</code> will cause an error. If <code>f</code> is a <code>slider</code> function,
it is automatically passed the data <code>x</code> to operate on, and number of
points <code>before</code> and <code>after</code> to use in the computation.</p></dd>


<dt id="arg-before-after">before, after<a class="anchor" aria-label="anchor" href="#arg-before-after"></a></dt>
<dd><p>How far <code>before</code> and <code>after</code> each <code>ref_time_value</code> should
the sliding window extend? At least one of these two arguments must be
provided; the other's default will be 0. The accepted values for these
depend on the type of the <code>time_value</code> column:</p><ul><li><p>if it is a Date and the cadence is daily, then they can be integers
(which will be interpreted in units of days) or difftimes with units
"days"</p></li>
<li><p>if it is a Date and the cadence is weekly, then they must be difftimes
with units "weeks"</p></li>
<li><p>if it is an integer, then they must be integers</p></li>
</ul><p>Endpoints of the window are inclusive. Common settings:</p><ul><li><p>For trailing/right-aligned windows from <code>ref_time_value - k</code> to
<code>ref_time_value</code>: either pass <code>before=k</code> by itself, or pass <code>before=k, after=0</code>.</p></li>
<li><p>For center-aligned windows from <code>ref_time_value - k</code> to
<code>ref_time_value + k</code>: pass <code>before=k, after=k</code>.</p></li>
<li><p>For leading/left-aligned windows from <code>ref_time_value</code> to
<code>ref_time_value + k</code>: either pass pass <code>after=k</code> by itself,
or pass <code>before=0, after=k</code>.</p></li>
</ul><p>See "Details:" on how missing rows are handled within the window.</p></dd>


<dt id="arg-ref-time-values">ref_time_values<a class="anchor" aria-label="anchor" href="#arg-ref-time-values"></a></dt>
<dd><p>Time values for sliding computations, meaning, each
element of this vector serves as the reference time point for one sliding
window. If missing, then this will be set to all unique time values in the
underlying data table, by default.</p></dd>


<dt id="arg-new-col-name">new_col_name<a class="anchor" aria-label="anchor" href="#arg-new-col-name"></a></dt>
<dd><p>Character vector indicating the name(s) of the new
column(s) that will contain the derivative values. Default
is "slide_value"; note that setting <code>new_col_name</code> equal to any existing
column names will overwrite those columns. If <code>names_sep</code> is <code>NULL</code>,
<code>new_col_name</code> must be the same length as <code>col_names</code>.</p></dd>


<dt id="arg-as-list-col">as_list_col<a class="anchor" aria-label="anchor" href="#arg-as-list-col"></a></dt>
<dd><p>Not supported. Included to match <code>epi_slide</code> interface.</p></dd>


<dt id="arg-names-sep">names_sep<a class="anchor" aria-label="anchor" href="#arg-names-sep"></a></dt>
<dd><p>String specifying the separator to use in <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">tidyr::unnest()</a></code>
when <code>as_list_col = FALSE</code>. Default is "_". Using <code>NULL</code> drops the prefix
from <code>new_col_name</code> entirely.</p></dd>


<dt id="arg-all-rows">all_rows<a class="anchor" aria-label="anchor" href="#arg-all-rows"></a></dt>
<dd><p>If <code>all_rows = TRUE</code>, then all rows of <code>x</code> will be kept in
the output even with <code>ref_time_values</code> provided, with some type of missing
value marker for the slide computation output column(s) for <code>time_value</code>s
outside <code>ref_time_values</code>; otherwise, there will be one row for each row in
<code>x</code> that had a <code>time_value</code> in <code>ref_time_values</code>. Default is <code>FALSE</code>. The
missing value marker is the result of <code><a href="https://vctrs.r-lib.org/reference/vec_cast.html" class="external-link">vctrs::vec_cast</a></code>ing <code>NA</code> to the type
of the slide computation output. If using <code>as_list_col = TRUE</code>, note that
the missing marker is a <code>NULL</code> entry in the list column; for certain
operations, you might want to replace these <code>NULL</code> entries with a different
<code>NA</code> marker.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>epi_df</code> object given by appending one or more new columns to
<code>x</code>, named according to the <code>new_col_name</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>To "slide" means to apply a function over a rolling window of time
steps for each data group, where the window is centered at a reference time
and left and right endpoints are given by the <code>before</code> and <code>after</code>
arguments.
If there are not enough time steps available to complete the window at any
given reference time, then <code>epi_slide_*()</code> will fail; it requires a
complete window to perform the computation. For a centrally-aligned slide
of <code>n</code> <code>time_value</code>s in a sliding window, set <code>before = (n-1)/2</code> and <code>after = (n-1)/2</code> when the number of <code>time_value</code>s in a sliding window is odd and
<code>before = n/2-1</code> and <code>after = n/2</code> when <code>n</code> is even.</p>
<p>Sometimes, we want to experiment with various trailing or leading window
widths and compare the slide outputs. In the (uncommon) case where
zero-width windows are considered, manually pass both the <code>before</code> and
<code>after</code> arguments.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="epi_slide.html">epi_slide</a></code> <code><a href="epi_slide_mean.html">epi_slide_mean</a></code> <code><a href="epi_slide_sum.html">epi_slide_sum</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># slide a 7-day trailing average formula on cases. This can also be done with `epi_slide_mean`</span></span></span>
<span class="r-in"><span><span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">epi_slide_opt</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">cases</span>,</span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="va"><a href="https://rdatatable.gitlab.io/data.table/reference/froll.html" class="external-link">frollmean</a></span>, before <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Remove a nonessential var. to ensure new col is printed, and rename new col</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, <span class="va">cases</span>, cases_7dav <span class="op">=</span> <span class="va">slide_value_cases</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An `epi_df` object, 4,026 x 4 with metadata:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * geo_type  = state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * time_type = day</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * as_of     = 2024-01-26 17:27:32.755949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value cases cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01     6       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02     4       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03     6       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04    11       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05    10       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06    18       <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07    26       11.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08    19       13.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09    23       16.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10    22       18.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4,016 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># slide a 7-day trailing average formula on cases. Adjust `frollmean` settings for speed</span></span></span>
<span class="r-in"><span><span class="co"># and accuracy, and to allow partially-missing windows.</span></span></span>
<span class="r-in"><span><span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">epi_slide_opt</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">cases</span>,</span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="va"><a href="https://rdatatable.gitlab.io/data.table/reference/froll.html" class="external-link">frollmean</a></span>, before <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>    <span class="co"># `frollmean` options</span></span></span>
<span class="r-in"><span>    na.rm <span class="op">=</span> <span class="cn">TRUE</span>, algo <span class="op">=</span> <span class="st">"exact"</span>, hasNA <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, <span class="va">cases</span>, cases_7dav <span class="op">=</span> <span class="va">slide_value_cases</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An `epi_df` object, 4,026 x 4 with metadata:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * geo_type  = state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * time_type = day</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * as_of     = 2024-01-26 17:27:32.755949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value cases cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01     6       6   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02     4       5   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03     6       5.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04    11       6.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05    10       7.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06    18       9.17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07    26      11.6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08    19      13.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09    23      16.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10    22      18.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4,016 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># slide a 7-day leading average</span></span></span>
<span class="r-in"><span><span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">epi_slide_opt</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">cases</span>,</span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="fu">slider</span><span class="fu">::</span><span class="va"><a href="https://slider.r-lib.org/reference/summary-slide.html" class="external-link">slide_mean</a></span>, after <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Remove a nonessential var. to ensure new col is printed</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, <span class="va">cases</span>, cases_7dav <span class="op">=</span> <span class="va">slide_value_cases</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An `epi_df` object, 4,026 x 4 with metadata:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * geo_type  = state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * time_type = day</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * as_of     = 2024-01-26 17:27:32.755949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value cases cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01     6       11.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02     4       13.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03     6       16.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04    11       18.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05    10       20.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06    18       25.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07    26       30.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08    19       34.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09    23       37.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10    22       56.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4,016 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># slide a 7-day centre-aligned sum. This can also be done with `epi_slide_sum`</span></span></span>
<span class="r-in"><span><span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">epi_slide_opt</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">cases</span>,</span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="fu">data.table</span><span class="fu">::</span><span class="va"><a href="https://rdatatable.gitlab.io/data.table/reference/froll.html" class="external-link">frollsum</a></span>, before <span class="op">=</span> <span class="fl">3</span>, after <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Remove a nonessential var. to ensure new col is printed</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_value</span>, <span class="va">time_value</span>, <span class="va">cases</span>, cases_7dav <span class="op">=</span> <span class="va">slide_value_cases</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An `epi_df` object, 4,026 x 4 with metadata:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * geo_type  = state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * time_type = day</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * as_of     = 2024-01-26 17:27:32.755949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value cases cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01     6         <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02     4         <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03     6         <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04    11         81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05    10         94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06    18        113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07    26        129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08    19        143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09    23        176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10    22        211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4,016 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Logan Brooks, Daniel McDonald, Evan Ray, Ryan Tibshirani.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

