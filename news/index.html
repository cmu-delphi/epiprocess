<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • epiprocess</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epiprocess</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.9999</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/epiprocess.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/slide.html">Slide a computation over signal values</a>
    <a class="dropdown-item" href="../articles/growth_rate.html">Estimate growth rates in signals</a>
    <a class="dropdown-item" href="../articles/correlation.html">Correlate signals over space and time</a>
    <a class="dropdown-item" href="../articles/aggregation.html">Aggregate signals over space and time</a>
    <a class="dropdown-item" href="../articles/outliers.html">Detect and correct outliers in signals</a>
    <a class="dropdown-item" href="../articles/archive.html">Work with archive objects and data revisions</a>
    <a class="dropdown-item" href="../articles/advanced.html">Advanced sliding with nonstandard outputs</a>
    <a class="dropdown-item" href="../articles/compactify.html">Compactify to remove redundant archive data</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cmu-delphi/epiprocess/tree/main/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/cmu-delphi/epiprocess/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="epiprocess-070">epiprocess 0.7.0<a class="anchor" aria-label="anchor" href="#epiprocess-070"></a></h2>
<p>Note that <code>epiprocess</code> uses the <a href="https://semver.org/" class="external-link">Semantic Versioning (“semver”)</a> scheme for all release versions, but any inter-release development versions will include an additional “.9999” suffix.</p>
<div class="section level3">
<h3 id="breaking-changes-0-7-0">Breaking changes:<a class="anchor" aria-label="anchor" href="#breaking-changes-0-7-0"></a></h3>
<ul><li>Changes to <code>epi_slide</code> and <code>epix_slide</code>:
<ul><li>If <code>f</code> is a function, it is now required to take at least three arguments. <code>f</code> must take an <code>epi_df</code> with the same column names as the archive’s <code>DT</code>, minus the <code>version</code> column; followed by a one-row tibble containing the values of the grouping variables for the associated group; followed by a reference time value, usually as a <code>Date</code> object. Optionally, it can take any number of additional arguments after that, and forward values for those arguments through <code>epi[x]_slide</code>’s <code>...</code> args.
<ul><li>To make your existing slide computations work, add a third argument to your <code>f</code> function to accept this new input: e.g., change <code>f = function(x,   g, &lt;any other arguments&gt;) { &lt;body&gt; }</code> to <code>f = function(x, g, rt, &lt;any   other arguments&gt;) { &lt;body&gt; }</code>.</li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-7-0">New features:<a class="anchor" aria-label="anchor" href="#new-features-0-7-0"></a></h3>
<ul><li>
<code>epi_slide</code> and <code>epix_slide</code> also make the window data, group key and reference time value available to slide computations specified as formulas or tidy evaluation expressions, in additional or completely new ways.
<ul><li>If <code>f</code> is a formula, it can now access the reference time value via <code>.z</code> or <code>.ref_time_value</code>.</li>
<li>If <code>f</code> is missing, the tidy evaluation expression in <code>...</code> can now refer to the window data as an <code>epi_df</code> or <code>tibble</code> with <code>.x</code>, the group key with <code>.group_key</code>, and the reference time value with <code>.ref_time_value</code>. The usual <code>.data</code> and <code>.env</code> pronouns also work, but<code><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/deprec-context.html" class="external-link">cur_data()</a></code> are not; work off of <code>.x</code> instead.</li>
</ul></li>
<li>
<code>epix_slide</code> has been made more like <code><a href="https://dplyr.tidyverse.org/reference/group_map.html" class="external-link">dplyr::group_modify</a></code>. It will no longer perform element/row recycling for size stability, accepts slide computation outputs containing any number of rows, and no longer supports <code>all_rows</code>.
<ul><li>To keep the old behavior, manually perform row recycling within <code>f</code> computations, and/or <code>left_join</code> a data frame representing the desired output structure with the current <code><a href="../reference/epix_slide.html">epix_slide()</a></code> result to obtain the desired repetitions and completions expected with <code>all_rows = TRUE</code>.</li>
</ul></li>
<li>
<code>epix_slide</code> will only output grouped or ungrouped tibbles. Previously, it would sometimes output <code>epi_df</code>s, but not consistently, and not always with the metadata desired. Future versions will revisit this design, and consider more closely whether/when/how to output an <code>epi_df</code>.
<ul><li>To keep the old behavior, convert the output of <code><a href="../reference/epix_slide.html">epix_slide()</a></code> to <code>epi_df</code> when desired and set the metadata appropriately.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-7-0">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-7-0"></a></h3>
<ul><li>
<code>epi_slide</code> and <code>epix_slide</code> now support <code>as_list_col = TRUE</code> when the slide computations output atomic vectors, and output a list column in “chopped” format (see <code><a href="https://tidyr.tidyverse.org/reference/chop.html" class="external-link">tidyr::chop</a></code>).</li>
<li>
<code>epi_slide</code> now works properly with slide computations that output just a <code>Date</code> vector, rather than converting <code>slide_value</code> to a numeric column.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="epiprocess-060">epiprocess 0.6.0<a class="anchor" aria-label="anchor" href="#epiprocess-060"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-6-0">Breaking changes:<a class="anchor" aria-label="anchor" href="#breaking-changes-0-6-0"></a></h3>
<ul><li>Changes to both <code>epi_slide</code> and <code>epix_slide</code>:
<ul><li>The <code>n</code>, <code>align</code>, and <code>before</code> arguments have been replaced by new <code>before</code> and <code>after</code> arguments. To migrate to the new version, replace these arguments in every <code>epi_slide</code> and <code>epix_slide</code> call. If you were only using the <code>n</code> argument, then this means replacing <code>n = &lt;n value&gt;</code> with <code>before =   &lt;n value&gt; - 1</code>.
<ul><li>
<code>epi_slide</code>’s time windows now extend <code>before</code> time steps before and <code>after</code> time steps after the corresponding <code>ref_time_values</code>. See <code><a href="../reference/epi_slide.html">?epi_slide</a></code> for details on matching old alignments.</li>
<li>
<code>epix_slide</code>’s time windows now extend <code>before</code> time steps before the corresponding <code>ref_time_values</code> all the way through the latest data available at the corresponding <code>ref_time_values</code>.</li>
</ul></li>
<li>Slide functions now keep any grouping of <code>x</code> in their results, like <code>mutate</code> and <code>group_modify</code>.
<ul><li>To obtain the old behavior, <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::ungroup</a></code> the slide results immediately.</li>
</ul></li>
</ul></li>
<li>Additional <code>epi_slide</code> changes:
<ul><li>When using <code>as_list_col = TRUE</code> together with <code>ref_time_values</code> and <code>all_rows=TRUE</code>, the marker for excluded computations is now a <code>NULL</code> entry in the list column, rather than a <code>NA</code>; if you are using <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">tidyr::unnest()</a></code> afterward and want to keep these missing data markers, you will need to replace the <code>NULL</code> entries with <code>NA</code>s. Skipped computations are now more uniformly detectable using <code>vctrs</code> methods.</li>
</ul></li>
<li>Additional<code>epix_slide</code> changes:
<ul><li>
<code>epix_slide</code>’s <code>group_by</code> argument has been replaced by <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::ungroup</a></code> S3 methods. The <code>group_by</code> method uses “data masking” (also referred to as “tidy evaluation”) rather than “tidy selection”.
<ul><li>Old syntax:
<ul><li><code>x %&gt;% epix_slide(&lt;other args&gt;, group_by=c(col1, col2))</code></li>
<li><code>x %&gt;% epix_slide(&lt;other args&gt;, group_by=all_of(colname_vector))</code></li>
</ul></li>
<li>New syntax:
<ul><li><code>x %&gt;% group_by(col1, col2) %&gt;% epix_slide(&lt;other args&gt;)</code></li>
<li><code>x %&gt;% group_by(across(all_of(colname_vector))) %&gt;% epix_slide(&lt;other args&gt;)</code></li>
</ul></li>
</ul></li>
<li>
<code>epix_slide</code> no longer defaults to grouping by non-<code>time_value</code>, non-<code>version</code> key columns, instead considering all data to be in one big group.
<ul><li>To obtain the old behavior, precede each <code>epix_slide</code> call lacking a <code>group_by</code> argument with an appropriate <code>group_by</code> call.</li>
</ul></li>
<li>
<code>epix_slide</code> now guesses <code>ref_time_values</code> to be a regularly spaced sequence covering all the <code>DT$version</code> values and the <code>version_end</code>, rather than the distinct <code>DT$time_value</code>s. To obtain the old behavior, pass in <code>ref_time_values = unique(&lt;ungrouped archive&gt;$DT$time_value)</code>.</li>
</ul></li>
<li>
<code>epi_archive</code>’s <code>clobberable_versions_start</code>’s default is now <code>NA</code>, so there will be no warnings by default about potential nonreproducibility. To obtain the old behavior, pass in <code>clobberable_versions_start =   max_version_with_row_in(x)</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="potentially-breaking-changes-0-6-0">Potentially-breaking changes:<a class="anchor" aria-label="anchor" href="#potentially-breaking-changes-0-6-0"></a></h3>
<ul><li>Fixed <code>[</code> on grouped <code>epi_df</code>s to maintain the grouping if possible when dropping the <code>epi_df</code> class (e.g., when removing the <code>time_value</code> column).</li>
<li>Fixed <code>epi_df</code> operations to be more consistent about decaying into non-<code>epi_df</code>s when the result of the operation doesn’t make sense as an <code>epi_df</code> (e.g., when removing the <code>time_value</code> column).</li>
<li>Changed <code>bind_rows</code> on grouped <code>epi_df</code>s to not drop the <code>epi_df</code> class. Like with ungrouped <code>epi_df</code>s, the metadata of the result is still simply taken from the first result, and may be inappropriate (<a href="https://github.com/cmu-delphi/epiprocess/issues/242" class="external-link">#242</a>).</li>
<li>
<code>epi_slide</code> and <code>epix_slide</code> now raise an error rather than silently filtering out <code>ref_time_values</code> that don’t meet their expectations.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-6-0">New features:<a class="anchor" aria-label="anchor" href="#new-features-0-6-0"></a></h3>
<ul><li>
<code>epix_slide</code>, <code>&lt;epi_archive&gt;$slide</code> have a new parameter <code>all_versions</code>. With <code>all_versions=TRUE</code>, <code>epix_slide</code> will pass a filtered <code>epi_archive</code> to each computation rather than an <code>epi_df</code> snapshot. This enables, e.g., performing pseudoprospective forecasts with a revision-aware forecaster using nested <code>epix_slide</code> operations.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-6-0">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-6-0"></a></h3>
<ul><li>Added <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::ungroup</a></code> S3 methods for <code>epi_archive</code> objects, plus corresponding <code>$group_by</code> and <code>$ungroup</code> R6 methods. The <code>group_by</code> implementation supports the <code>.add</code> and <code>.drop</code> arguments, and <code>ungroup</code> supports partial ungrouping with <code>...</code>.</li>
<li>
<code>as_epi_archive</code>, <code>epi_archive$new</code> now perform checks for the key uniqueness requirement (part of <a href="https://github.com/cmu-delphi/epiprocess/issues/154" class="external-link">#154</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-6-0">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-6-0"></a></h3>
<ul><li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
<li>Implemented <code><a href="https://dplyr.tidyverse.org/reference/dplyr_extending.html" class="external-link">?dplyr::dplyr_extending</a></code> for <code>epi_df</code>s (<a href="https://github.com/cmu-delphi/epiprocess/issues/223" class="external-link">#223</a>).</li>
<li>Fixed various small documentation issues (<a href="https://github.com/cmu-delphi/epiprocess/issues/217" class="external-link">#217</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="epiprocess-050">epiprocess 0.5.0:<a class="anchor" aria-label="anchor" href="#epiprocess-050"></a></h2>
<div class="section level3">
<h3 id="potentially-breaking-changes-0-5-0">Potentially-breaking changes:<a class="anchor" aria-label="anchor" href="#potentially-breaking-changes-0-5-0"></a></h3>
<ul><li>
<code>epix_slide</code>, <code>&lt;epi_archive&gt;$slide</code> now feed <code>f</code> an <code>epi_df</code> rather than converting to a tibble/<code>tbl_df</code> first, allowing use of <code>epi_df</code> methods and metadata, and often yielding <code>epi_df</code>s out of the slide as a result. To obtain the old behavior, convert to a tibble within <code>f</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-5-0">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-5-0"></a></h3>
<ul><li>Fixed <code>epix_merge</code>, <code>&lt;epi_archive&gt;$merge</code> always raising error on <code>sync="truncate"</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-5-0">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-5-0"></a></h3>
<ul><li>Added <code>Remotes:</code> entry for <code>genlasso</code>, which was removed from CRAN.</li>
<li>Added <code>as_epi_archive</code> tests.</li>
<li>Added missing <code>epix_merge</code> test for <code>sync="truncate"</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="epiprocess-040">epiprocess 0.4.0:<a class="anchor" aria-label="anchor" href="#epiprocess-040"></a></h2>
<div class="section level3">
<h3 id="potentially-breaking-changes-0-4-0">Potentially-breaking changes:<a class="anchor" aria-label="anchor" href="#potentially-breaking-changes-0-4-0"></a></h3>
<ul><li>Fixed <code>[.epi_df</code> to not reorder columns, which was incompatible with downstream packages.</li>
<li>Changed <code>[.epi_df</code> decay-to-tibble logic to more coherent with <code>epi_df</code>s current tolerance of nonunique keys: stopped decaying to a tibble in some cases where a unique key wouldn’t have been preserved, since we don’t enforce a unique key elsewhere.</li>
<li>Fixed <code>[.epi_df</code> to adjust <code>"other_keys"</code> metadata when corresponding columns are selected out.</li>
<li>Fixed <code>[.epi_df</code> to raise an error if resulting column names would be nonunique.</li>
<li>Fixed <code>[.epi_df</code> to drop metadata if decaying to a tibble (due to removal of essential columns).</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-4-0">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-4-0"></a></h3>
<ul><li>Added check that <code>epi_df</code> <code>additional_metadata</code> is list.</li>
<li>Fixed some incorrect <code>as_epi_df</code> examples.</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-4-0">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-4-0"></a></h3>
<ul><li>Applied rename of upstream package in examples: <code>delphi.epidata</code> -&gt; <code>epidatr</code>.</li>
<li>Rounded out <code>[.epi_df</code> tests.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="epiprocess-030">epiprocess 0.3.0:<a class="anchor" aria-label="anchor" href="#epiprocess-030"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-3-0">Breaking changes:<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h3>
<ul><li>
<code>as_epi_archive</code>, <code>epi_archive$new</code>:
<ul><li>Compactification (see below) by default may change results if working directly with the <code>epi_archive</code>’s <code>DT</code> field; to disable, pass in <code>compactify=FALSE</code>.</li>
</ul></li>
<li>
<code>epi_archive</code>’s wrappers and R6 methods have been updated to follow these rules regarding reference semantics:
<ul><li>
<code>epix_&lt;method&gt;</code> will not mutate input <code>epi_archive</code>s, but may alias them or alias their fields (which should not be a worry if a user sticks to these <code>epix_*</code> functions and “regular” R functions with copy-on-write-like behavior, avoiding mutating functions <code>[.data.table</code>).</li>
<li>
<code>x$&lt;method&gt;</code> may mutate <code>x</code>; if it mutates <code>x</code>, it will return <code>x</code> invisibly (where this makes sense), and, for each of its fields, may either mutate the object to which it refers or reseat the reference (but not both); if <code>x$&lt;method&gt;</code> does not mutate <code>x</code>, its result may contain aliases to <code>x</code> or its fields.</li>
</ul></li>
<li>
<code>epix_merge</code>, <code>&lt;epi_archive&gt;$merge</code>:
<ul><li>Removed <code>...</code>, <code>locf</code>, and <code>nan</code> parameters.</li>
<li>Changed the default behavior, which now corresponds to using <code>by=key(x$DT)</code> (but demanding that is the same set of column names as <code>key(y$DT)</code>), <code>all=TRUE</code>, <code>locf=TRUE</code>, <code>nan=NaN</code> (but with the post-filling step fixed to only apply to gaps, and no longer fill over <code>NA</code>s originating from <code>x$DT</code> and <code>y$DT</code>).</li>
<li>
<code>x</code> and <code>y</code> are no longer allowed to share names of non-<code>by</code> columns.</li>
<li>
<code>epix_merge</code> no longer mutates its <code>x</code> argument (but <code>$merge</code> continues to do so).</li>
<li>Removed (undocumented) capability of passing a <code>data.table</code> as <code>y</code>.</li>
</ul></li>
<li>
<code>epix_slide</code>:
<ul><li>Removed inappropriate/misleading <code>n=7</code> default argument (due to reporting latency, <code>n=7</code> will <em>not</em> yield 7 days of data in a typical daily-reporting surveillance data source, as one might have assumed).</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-3-0">New features:<a class="anchor" aria-label="anchor" href="#new-features-0-3-0"></a></h3>
<ul><li>
<code>as_epi_archive</code>, <code>epi_archive$new</code>:
<ul><li>New <code>compactify</code> parameter allows removal of rows that are redundant for the purposes of <code>epi_archive</code>’s methods, which use the last version of each observation carried forward.</li>
<li>New <code>clobberable_versions_start</code> field allows marking a range of versions that could be “clobbered” (rewritten without assigning new version tags); previously, this was hard-coded as <code>max(&lt;epi_archive&gt;$DT$version)</code>.</li>
<li>New <code>versions_end</code> field allows marking a range of versions beyond <code>max(&lt;epi_archive&gt;$DT$version)</code> that were observed, but contained no changes.</li>
</ul></li>
<li>
<code>epix_merge</code>, <code>$merge</code>:
<ul><li>New <code>sync</code> parameter controls what to do if <code>x</code> and <code>y</code> aren’t equally up to date (i.e., if <code>x$versions_end</code> and <code>y$versions_end</code> are different).</li>
</ul></li>
<li>New function <code>epix_fill_through_version</code>, method <code>&lt;epi_archive&gt;$fill_through_version</code>: non-mutating &amp; mutating way to ensure that an archive contains versions at least through some <code>fill_versions_end</code>, extrapolating according to <code>how</code> if necessary.</li>
<li>Example archive data object is now constructed on demand from its underlying data, so it will be based on the user’s version of <code>epi_archive</code> rather than an outdated R6 implementation from whenever the data object was generated.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="epiprocess-020">epiprocess 0.2.0:<a class="anchor" aria-label="anchor" href="#epiprocess-020"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-2-0">Breaking changes:<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0"></a></h3>
<ul><li>Removed default <code>n=7</code> argument to <code>epix_slide</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-2-0">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-2-0"></a></h3>
<ul><li>Ignore <code>NA</code>s when printing <code>time_value</code> range for an <code>epi_archive</code>.</li>
<li>Fixed misleading column naming in <code>epix_slide</code> example.</li>
<li>Trimmed down <code>epi_slide</code> examples.</li>
<li>Synced out-of-date docs.</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-2-0">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-2-0"></a></h3>
<ul><li>Removed dependency of some <code>epi_archive</code> tests on an example archive. object, and made them more understandable by reading without running.</li>
<li>Fixed <code>epi_df</code> tests relying on an S3 method for <code>epi_df</code> implemented externally to <code>epiprocess</code>.</li>
<li>Added tests for <code>epi_archive</code> methods and wrapper functions.</li>
<li>Removed some dead code.</li>
<li>Made <code>.{Rbuild,git}ignore</code> files more comprehensive.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="epiprocess-012">epiprocess 0.1.2:<a class="anchor" aria-label="anchor" href="#epiprocess-012"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-2">New features:<a class="anchor" aria-label="anchor" href="#new-features-0-1-2"></a></h3>
<ul><li>New <code>new_epi_df</code> function is similar to <code>as_epi_df</code>, but (i) recalculates, overwrites, and/or drops most metadata of <code>x</code> if it has any, (ii) may still reorder the columns of <code>x</code> even if it’s already an <code>epi_df</code>, and
<ol start="3" style="list-style-type: lower-roman"><li>treats <code>x</code> as optional, constructing an empty <code>epi_df</code> by default.</li>
</ol></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-1-2">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-1-2"></a></h3>
<ul><li>Fixed <code>geo_type</code> guessing on alphabetical strings with more than 2 characters to yield <code>"custom"</code>, not US <code>"nation"</code>.</li>
<li>Fixed <code>time_type</code> guessing to actually detect <code>Date</code>-class <code>time_value</code>s regularly spaced 7 days apart as <code>"week"</code>-type as intended.</li>
<li>Improved printing of <code>epi_df</code>s, <code>epi_archives</code>s.</li>
<li>Fixed <code>as_of</code> to not cut off any (forecast-like) data with <code>time_value &gt;   max_version</code>.</li>
<li>Expanded <code>epi_df</code> docs to include conversion from <code>tsibble</code>/<code>tbl_ts</code> objects, usage of <code>other_keys</code>, and pre-processing objects not following the <code>geo_value</code>, <code>time_value</code> naming scheme.</li>
<li>Expanded <code>epi_slide</code> examples to show how to use an <code>f</code> argument with named parameters.</li>
<li>Updated examples to print relevant columns given a common 80-column terminal width.</li>
<li>Added growth rate examples.</li>
<li>Improved <code>as_epi_archive</code> and <code>epi_archive$new</code>/<code>$initialize</code> documentation, including constructing a toy archive.</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-1-2">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-1-2"></a></h3>
<ul><li>Added tests for <code>epi_slide</code>, <code>epi_cor</code>, and internal utility functions.</li>
<li>Fixed currently-unused internal utility functions <code>MiddleL</code>, <code>MiddleR</code> to yield correct results on odd-length vectors.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="epiprocess-011">epiprocess 0.1.1:<a class="anchor" aria-label="anchor" href="#epiprocess-011"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-1">New features:<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h3>
<ul><li>New example data objects allow one to quickly experiment with <code>epi_df</code>s and <code>epi_archives</code> without relying/waiting on an API to fetch data.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-1-1">Improvements:<a class="anchor" aria-label="anchor" href="#improvements-0-1-1"></a></h3>
<ul><li>Improved <code>epi_slide</code> error messaging.</li>
<li>Fixed description of the appropriate parameters for an <code>f</code> argument to <code>epi_slide</code>; previous description would give incorrect behavior if <code>f</code> had named parameters that did not receive values from <code>epi_slide</code>’s <code>...</code>.</li>
<li>Added some examples throughout the package.</li>
<li>Using example data objects in vignettes also speeds up vignette compilation.</li>
</ul></div>
<div class="section level3">
<h3 id="cleanup-0-1-1">Cleanup:<a class="anchor" aria-label="anchor" href="#cleanup-0-1-1"></a></h3>
<ul><li>Set up gh-actions CI.</li>
<li>Added tests for <code>epi_df</code>s.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="epiprocess-010">epiprocess 0.1.0<a class="anchor" aria-label="anchor" href="#epiprocess-010"></a></h2>
<div class="section level3">
<h3 id="implemented-core-functionality-vignettes-0-1-0">Implemented core functionality, vignettes:<a class="anchor" aria-label="anchor" href="#implemented-core-functionality-vignettes-0-1-0"></a></h3>
<p>Classes: * <code>epi_df</code>: specialized <code>tbl_df</code> for geotemporal epidemiological time series data, with optional metadata recording other key columns (e.g., demographic breakdowns) and <code>as_of</code> what time/version this data was current/published. Associated functions: * <code>as_epi_df</code> converts to an <code>epi_df</code>, guessing the <code>geo_type</code>, <code>time_type</code>, <code>other_keys</code>, and <code>as_of</code> if not specified. * <code>as_epi_df.tbl_ts</code> and <code>as_tsibble.epi_df</code> automatically set <code>other_keys</code> and <code>key</code>&amp;<code>index</code>, respectively. * <code>epi_slide</code> applies a user-supplied computation to a sliding/rolling time window and user-specified groups, adding the results as new columns, and recycling/broadcasting results to keep the result size stable. Allows computation to be provided as a function, <code>purrr</code>-style formula, or tidyeval dots. Uses <code>slider</code> underneath for efficiency. * <code>epi_cor</code> calculates Pearson, Kendall, or Spearman correlations between two (optionally time-shifted) variables in an <code>epi_df</code> within user-specified groups. * Convenience function: <code>is_epi_df</code>. * <code>epi_archive</code>: R6 class for version (patch) data for geotemporal epidemiological time series data sets. Comes with S3 methods and regular functions that wrap around this functionality for those unfamiliar with R6 methods. Associated functions: * <code>as_epi_archive</code>: prepares an <code>epi_archive</code> object from a data frame containing snapshots and/or patch data for every available version of the data set. * <code>as_of</code>: extracts a snapshot of the data set as of some requested version, in <code>epi_df</code> format. * <code>epix_slide</code>, <code>&lt;epi_archive&gt;$slide</code>: similar to <code>epi_slide</code>, but for <code>epi_archive</code>s; for each requested <code>ref_time_value</code> and group, applies a time window and user-specified computation to a snapshot of the data as of <code>ref_time_value</code>. * <code>epix_merge</code>, <code>&lt;epi_archive&gt;$merge</code>: like <code>merge</code> for <code>epi_archive</code>s, but allowing for the last version of each observation to be carried forward to fill in gaps in <code>x</code> or <code>y</code>. * Convenience function: <code>is_epi_archive</code>.</p>
<p>Additional functions: * <code>growth_rate</code>: estimates growth rate of a time series using one of a few built-in <code>method</code>s based on relative change, linear regression, smoothing splines, or trend filtering. * <code>detect_outlr</code>: applies one or more outlier detection methods to a given signal variable, and optionally aggregates the outputs to create a consensus result. * <code>detect_outlr_rm</code>: outlier detection function based on a rolling-median-based outlier detection function; one of the methods included in <code>detect_outlr</code>. * <code>detect_outlr_stl</code>: outlier detection function based on a seasonal-trend decomposition using LOESS (STL); one of the methods included in <code>detect_outlr</code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Logan Brooks, Daniel McDonald, Evan Ray, Ryan Tibshirani.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

